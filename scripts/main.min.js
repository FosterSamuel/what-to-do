function lowest(){"use strict";return"lowest"}function highest(){"use strict";return"highest"}function lastGivenTime(){"use strict";return"lastGivenTime"}function taskWeight(){"use strict";return"weight"}function taskPriority(){"use strict";return"priority"}function timeDifference(){"use strict";return"timeDifference"}function timeNeeded(){"use strict";return"timeNeeded"}function byProperty(e,t){"use strict";return t===lowest()?function(t,i){return t[e]-i[e]}:t===highest()?function(t,i){return i[e]-t[e]}:function(e,t){return!1}}function generateTimeDifference(e,t){"use strict";return e.map(function(e){return e.hasOwnProperty(lastGivenTime())&&e[lastGivenTime()]===t?e:(e[lastGivenTime()]=t,e.timeDifference=t-e.timeNeeded,e)})}function generateTaskWeight(e){"use strict";return e.map(function(e){return e.weight=e.priority-e.timeDifference,e})}function random4(){"use strict";return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function generateTaskID(){"use strict";return random4()+random4()}function changeTaskPriority(e,t){"use strict";e.priority=t}function changeTaskName(e,t){e.name=t}function changeTaskTime(e,t){e.timeNeeded=t,e[lastGivenTime()]=t}function getPossibleTasks(e,t){"use strict";return e>0?t.filter(function(e){return e.timeDifference>=0}).splice(0,e):t}function getBestTasks(e){"use strict";e.sort(byProperty(taskWeight(),highest()));var t=[],i=e[0].weight||1,a=!1;return t.push(e[0]),e.forEach(function(e,s){s>0&&!a&&(e.weight===i?t.push(e):a=!0)}),t}function getTaskByID(e,t){"use strict";return t.filter(function(t){return t.id===e})[0]}function addTask(e,t,i,a){"use strict";e.push({id:generateTaskID(),name:t,timeNeeded:i,priority:a})}function deleteTask(e,t){var i=0;e.filter(function(e,a){return e.id===t?(i=a,!0):void 0});e.splice(i,1)}function whatToDo(e,t){"use strict";var i=[],a=[];if(addTask(a,"_#_!@NOTPOSSIBLE@!_#__",1,1),generateTimeDifference(e,t),i=getPossibleTasks(e.length,e),i.length<1)return a;generateTaskWeight(i);var s=getBestTasks(i);return s.length>1&&s.sort(byProperty(taskWeight(),SORT_PRIORITY())),s}function toggleVisiblity(e){"use strict";e.classList.contains("hidden")?e.classList.remove("hidden"):e.classList.add("hidden")}function getTimePhrase(e){"use strict";var t="hours";if(1===e)t="hour";else if(1>e){var i=60*e;return t="minutes",1===i&&(t="minute"),i+" "+t}return e+" "+t}function generatePriorityString(e){"use strict";switch(e){case 1:return"Low";case 2:return"Medium";case 3:return"High"}return"Medium"}function createTaskHTML(e,t){"use strict";var i=t||"",a=getTimePhrase(e.timeNeeded),s=generatePriorityString(e.priority),n=document.createElement("section"),r=document.createElement("hgroup"),d=document.createElement("h2"),u=document.createElement("h3"),o=document.createElement("i"),c=document.createElement("i");if(""===i)var l=document.createElement("button"),T=document.createElement("select"),m=document.createElement("option"),k=document.createElement("option"),p=document.createElement("option"),h=document.createElement("input");if(n.classList.add("task"),d.classList.add("hidden"),d.innerHTML="Task: "+e.name,u.setAttribute("data-task",e.id),u.innerHTML=e.name,o.id="priority",o.innerHTML="Priority: "+s,o.setAttribute("data-priority",s.toLowerCase()),c.id="time-needed",c.innerHTML="Time needed: "+a,""===i){switch(u.setAttribute("contenteditable",!0),u.addEventListener("keydown",function(){return handleTaskNameEdit(event,this)}),u.addEventListener("blur",function(){return handleTaskNameEdit(event,this)}),l.innerHTML="X",l.addEventListener("click",function(){return handleTaskDeletion(e.id)}),o.innerHTML="Priority: ",T.setAttribute("data-task",e.id),T.addEventListener("change",function(){return handleTaskPriorityEdit(this)}),m.value="1",k.value="2",p.value="3",m.innerHTML="Low",k.innerHTML="Medium",p.innerHTML="High",e.priority){case 1:m.setAttribute("selected",!0);break;case 2:k.setAttribute("selected",!0);break;case 3:p.setAttribute("selected",!0)}c.innerHTML="Time Needed: ",h.id="time-input",h.min=2e-4,h.max=1e4,h.type="number",h.value=e.timeNeeded,h.setAttribute("inputMode","numeric"),h.setAttribute("data-task",e.id),h.addEventListener("input",function(){return handleTaskTimeEdit(this)})}return r.appendChild(d),""===i&&(r.appendChild(l),T.appendChild(m),T.appendChild(k),T.appendChild(p),o.appendChild(T),c.appendChild(h)),r.appendChild(u),n.appendChild(r),n.appendChild(o),n.appendChild(c),n}function updateDisplayedTask(){"use strict";var e=document.querySelector(".output"),t=e.innerHTML.indexOf("<section");e.innerHTML.slice(0,t);"_#_!@NOTPOSSIBLE@!_#__"!==displayedTasks[0].name?(e.innerHTML="",displayedTasks.forEach(function(t){e.appendChild(createTaskHTML(t,"display"))})):0===masterTaskList.length?e.innerHTML="<p>You have no tasks in your list.</p>":e.innerHTML="<p>No possible tasks. Add a new task or more time.</p>"}function updateTaskList(e){"use strict";for(var t=document.querySelector(".tasks"),i=4,a=0;a<t.childNodes.length;a++)"INPUT"===t.childNodes.item(a).tagName&&(i=a+1);for(;t.hasChildNodes()&&t.childNodes.length>i;)t.removeChild(t.lastChild);e.sort(byProperty(timeNeeded(),lowest())),e.forEach(function(e){t.appendChild(createTaskHTML(e))})}function getInputFromElement(e){"use strict";var t=e.value;return t=""!==t?parseFloat(t):1}function updatePage(){"use strict";var e=getInputFromElement(timeHoursInput),t=whatToDo(masterTaskList,e)[0];displayedTasks[0]=t,updateTaskList(masterTaskList),updateDisplayedTask()}function handleTaskDeletion(e){"use strict";deleteTask(masterTaskList,e),updatePage()}function handleTaskNameEdit(e,t){"use strict";var i=getTaskByID(t.getAttribute("data-task"),masterTaskList),a=i.name;if("blur"===e.type)changeTaskName(i,t.innerHTML),updatePage();else if("keydown"===e.type){if(13==e.keyCode||13==e.which)return changeTaskName(i,t.innerHTML),updatePage(),t.blur(),!1;27!=e.keyCode&&27!=e.which||(t.innerHTML=a,t.blur())}}function handleTaskPriorityEdit(e){var t=parseInt(e.value),i=e.getAttribute("data-task"),a=getTaskByID(i,masterTaskList),s=e.parentNode;s.setAttribute("data-priority",generatePriorityString(t).toLowerCase()),changeTaskPriority(a,t),updatePage()}function handleTaskTimeEdit(e){var t=parseFloat(e.value),i=e.getAttribute("data-task"),a=getTaskByID(i,masterTaskList);changeTaskTime(a,t),displayedTasks[0].id===i&&(displayedTasks[0].timeNeeded=t,displayedTasks=whatToDo(masterTaskList,timeAlloted),updateDisplayedTask())}function handleNewTaskCreation(){addTask(masterTaskList,"[New Task]",1/60,1),updatePage()}var masterTaskList=[],displayedTasks=[],timeAlloted=1,SORT_PRIORITY=function(){"use strict";return lowest()};addTask(masterTaskList,"Code left-pad",.1,1),addTask(masterTaskList,"Make bed",.1,1),addTask(masterTaskList,"Sketch website idea",.5,1),addTask(masterTaskList,"Contribute on Github",1,1),addTask(masterTaskList,"Work on scholarships",2,2),addTask(masterTaskList,"Back-up your data",2,3),addTask(masterTaskList,"Organize your programming assets",2,1),addTask(masterTaskList,"Write English paper",4,2),addTask(masterTaskList,"Build a JavaScript framework",6,1),addTask(masterTaskList,"Call your parents",6,1),addTask(masterTaskList,"Clean entire house",6,2),addTask(masterTaskList,"Make good use of your job's time",8,2),addTask(masterTaskList,"Learn all of JavaScript",200,3);var tasklistSection=document.querySelector(".tasks"),timeHoursInput=document.getElementById("input-hours"),addTaskButton=document.querySelector("#btn-add-task"),editTaskListButton=document.getElementById("btn-show-tasks");timeHoursInput.addEventListener("keyup",function(){return updatePage()}),addTaskButton.addEventListener("click",function(){return handleNewTaskCreation()}),editTaskListButton.addEventListener("click",function(){return toggleVisiblity(tasklistSection)}),updateTaskList(masterTaskList),displayedTasks=whatToDo(masterTaskList,timeAlloted),updateDisplayedTask();