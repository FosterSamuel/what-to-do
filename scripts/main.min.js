function displayTask(e){"use strict";var t=e.timeNeeded+" hour(s)";e.timeNeeded<1&&(t=(60*e.timeNeeded).toPrecision(2)+" minute(s)");var r=document.createElement("section"),i=document.querySelector(".results"),s=document.createTextNode(e.name+" | Time Needed: "+t);i.innerHTML="",tasksOnDisplay[0]=e,r.appendChild(s),i.appendChild(r),console.log(e)}function getTimePhrase(e){"use strict";var t="hours";if(1===e)t="hour";else if(1>e){var r=60*e;return t="minutes",1===r&&(t="minute"),r+" "+t}return e+" "+t}function generatePriorityString(e){"use strict";switch(e){case 1:return"Low";case 2:return"Medium";case 3:return"High"}return"Medium"}function createTaskHTML(e){var t=getTimePhrase(e.timeNeeded),r=generatePriorityString(e.priority),i="<section class='task'>\n",s=[1===e.priority?"selected='true'":"",2===e.priority?"selected='true'":"",3===e.priority?"selected='true'":""];return i+="<hgroup>\n",i+=" <h2 class='hidden'> Best Task: "+e.name+"</h2>\n",i+="<button onclick='deleteTask(tasks, \""+e.id+"\"); populateHTML(tasks);'>X</button>\n",i+=" <h3 data-task='"+e.id+"' contenteditable onkeydown='return handleTaskNameEdit(event, this);' onblur='handleTaskNameEdit(event, this);'>"+e.name+"</h3>\n",i+="</hgroup>\n",i+="<i id='priority' data-priority='"+r.toLowerCase()+"'>Priority: \n",i+="<select data-task='"+e.id+"' onchange='updateTaskPriority(this);'>\n",i+="     <option value='1' "+s[0]+">Low</option>\n",i+="     <option value='2' "+s[1]+">Medium</option>\n",i+="     <option value='3' "+s[2]+">High</option>\n",i+="</select></i>\n",i+="<i id='time-needed'>Time needed: "+t+"</i>\n",i+="</section>"}function updateDisplayedTask(e){"use strict";var t=getTimePhrase(e.timeNeeded),r=generatePriorityString(e.priority);resultTimeNeeded.innerHTML="Time needed: "+t,resultInivisibleHeading.innerHTML="Best task: "+e.name,resultVisibleHeading.innerHTML=e.name,resultPriority.innerHTML="Priority: "+r,resultPriority.setAttribute("data-priority",r.toLowerCase()),tasksOnDisplay[0]=e}function populateHTML(e){var t=document.querySelector(".tasks"),r=t.innerHTML.indexOf("<section"),i=t.innerHTML.slice(0,r);t.innerHTML=i,e.sort(byProperty(timeNeeded(),lowest())),e.forEach(function(e){t.innerHTML+=createTaskHTML(e)})}function toggleTaskListVisibility(){taskListHTML.classList.contains("hidden")?taskListHTML.classList.remove("hidden"):taskListHTML.classList.add("hidden")}function lowest(){"use strict";return"lowest"}function highest(){"use strict";return"highest"}function lastGivenTime(){"use strict";return"lastGivenTime"}function taskWeight(){"use strict";return"weight"}function taskPriority(){"use strict";return"priority"}function timeDifference(){"use strict";return"timeDifference"}function timeNeeded(){"use strict";return"timeNeeded"}function byProperty(e,t){"use strict";return t===lowest()?function(t,r){return t[e]-r[e]}:t===highest()?function(t,r){return r[e]-t[e]}:function(e,t){return!1}}function generateTimeDifference(e,t){"use strict";return e.map(function(e){return e.hasOwnProperty(lastGivenTime())&&e[lastGivenTime()]===t?e:(e[lastGivenTime()]=t,e.timeDifference=t-e.timeNeeded,e)})}function generateTaskWeight(e){"use strict";return e.map(function(e){return e.weight=e.priority-e.timeDifference,e})}function generateTaskID(){"use strict";return random4()+random4()}function random4(){"use strict";return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function updateTaskPriority(e){var t=parseInt(e.value),r=e.getAttribute("data-task"),i=getTaskByID(r,tasks),s=e.parentNode;s.setAttribute("data-priority",generatePriorityString(t).toLowerCase()),i.priority=t,tasksOnDisplay[0].id===r&&updateDisplayedTask(i)}function updateTaskName(e,t){e.name=t,e.id===tasksOnDisplay[0].id&&updateDisplayedTask(e)}function getPossibleTasks(e,t){"use strict";return e>0?t.filter(function(e){return e.timeDifference>=0}).splice(0,e):t}function getBestTasks(e){"use strict";e.sort(byProperty(taskWeight(),highest()));var t=[],r=e[0].weight,i=!1;return t.push(e[0]),e.forEach(function(e,s){s>0&&!i&&(e.weight===r?t.push(e):i=!0)}),t}function getTaskByID(e,t){"use strict";return t.filter(function(t){return t.id===e})[0]}function createTask(e,t,r,i){"use strict";e.push({id:generateTaskID(),name:t,timeNeeded:r,priority:i})}function deleteTask(e,t){var r=0;e.filter(function(e,i){return e.id===t?(r=i,!0):void 0});e.splice(r,1),console.log(e)}function whatToDo(e,t){"use strict";var r=[];generateTimeDifference(e,t),r=getPossibleTasks(e.length,e),generateTaskWeight(r);var i=getBestTasks(r);return i.length>1&&i.sort(byProperty(taskWeight(),SORT_PRIORITY())),i}function getUserInput(e){"use strict";var t=e.value;return t=""!==t?parseFloat(t):1}function updatePage(){"use strict";var e=getUserInput(timeHoursInput);updateDisplayedTask(whatToDo(tasks,e)[0])}function handleTaskNameEdit(e,t){"use strict";var r=getTaskByID(t.getAttribute("data-task"),tasks),i=r.name;if("blur"===e.type)updateTaskName(r,t.innerHTML);else if("keydown"===e.type){if(13==e.keyCode||13==e.which)return updateTaskName(r,t.innerHTML),t.blur(),!1;27!=e.keyCode&&27!=e.which||(t.innerHTML=i,t.blur())}}var tasks=[],tasksOnDisplay=[],timeAlloted=1,SORT_PRIORITY=function(){"use strict";return lowest()};createTask(tasks,"Code left-pad",.1,1),createTask(tasks,"Make bed",.1,1),createTask(tasks,"Sketch website idea",.5,1),createTask(tasks,"Contribute on Github",1,1),createTask(tasks,"Work on scholarships",2,2),createTask(tasks,"Back-up your data",2,3),createTask(tasks,"Organize your programming assets",2,1),createTask(tasks,"Write English paper",4,2),createTask(tasks,"Build a JavaScript framework",6,1),createTask(tasks,"Call your parents",6,1),createTask(tasks,"Clean entire house",6,2),createTask(tasks,"Make good use of your job's time",8,2),createTask(tasks,"Learn all of JavaScript",200,3),tasksOnDisplay=whatToDo(tasks,timeAlloted),populateHTML(tasks);var result=document.querySelector(".result"),resultInivisibleHeading=result.querySelector("hgroup h2"),resultVisibleHeading=result.querySelector("hgroup h3"),resultTimeNeeded=result.querySelector("#time-needed"),resultPriority=result.querySelector("#priority"),taskListHTML=document.querySelector(".tasks"),timeHoursInput=document.querySelector("#input-hours");updateDisplayedTask(whatToDo(tasks,timeAlloted)[0]);